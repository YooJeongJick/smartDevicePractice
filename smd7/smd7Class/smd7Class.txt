해당 실습에선 스마트폰을 무선공유기로 사용
AP 역할과 동시에 클라이언트 역할을 실행

웹서버를 운영하는 방식
1. 동기 
Ex) 5-1
2. 비동기
Ex) 5-2, 5-4
+= 운영방식 차이점

ESP32 자체를 웹서버로 자주 사용하지 않음
이용자 증가에 따른 속도 문제
주로 서버를 따로 둔다

서버를 실행시키기 위해선 공인 IP가 필요함
집에서 이용하는 것은 사설 IP

5-1
1. 와이파이를 사용하는 방법
2. WebServer.h 사용하는 방법

접속을 위해선 IP주소와 포트가 필요

5-2
내장 LED 뿐만 아니라 조명을 연결해서 사용할 수 있음
+= 5-2 응용

비동기 방식이기 때문에
새로운 라이브러리 사용
두 개가 있어야 정상적인 작동 가능 

ESP32 내부에는 RAM과 fresh 메모리 존재
html 코드 내용은 fresh 메모리에 들어감
RAM은 용량이 작기 때문에 불가

R"rawliteral
문자대로 인식을 가능하게 도와줌
+= R"rawliteral

Roof 함수 생략 가능 

//

디모의 테크 노트
-> 공유기의 IP주소는 왜... 

IP 주소?
Ip, 인터넷 통신을 위해 지켜야할 규약
집 주소를 통해 택배를 보낼 수 있듯이, 
IP 주소를 통해 데이터를 보낼 수 있음

+= 16진수 개념

보통 컴퓨터에선 2진수 및 16진수를 사용하지만
IP주소는 10진수로 표현

표현할 수 있는 모든 경우의 수는 약 42억개

IP,
IP 앞자리에 따라 사용범위 나눔
여러 클래스로 나뉘지만, 주요 사용되는 것은 A, B, C 클래스
이 3개의 클래스의 총합은 약 34억개, 부족하다!

해결 방안
- 사설 네트워크 허용

공인(public)IP, 서버 운영의 용도가 아니라면 필요 없음
사설(private)IP
고정IP, 서버는 고정 IP 요함
유동IP

하늘아래 두 개의 주소는 없다!
주소 중복 시 접근 할 때 오류 발생.
사설IP는 외부에서 접근하는 용도가 아니기 때문에 
중복 되어도 상관 없음

- DHCP
핫스팟 원리
사용하지 않는 주소를 자동으로 부여
직접 주소 부여의 수고를 덜 수 있다.

그래도 부족하다!
IPv4의 4배! IPv6 등장~~

그러나, 기존의 인터넷은 여전히 IPv4 사용

//

생활코딩
-> 인터넷과 자가서버

내가 개발한 웹어플리케이션을 
모든 사람이 접속할 수 있도록!

실제로 서비스를 제공하기 위해선
인터넷에 대한 이해가 필요 

IP주소, Internet Protocol Address
프로토콜이란 약속, 즉 규약
각각의 플레이어들이 준수해야 하는 규칙!

통신에 있어서는 A와 B간의 약속
내가 보낼테니 너는 받아라~

인터넷 프로토콜을 사용하는 여러 장비들 (Ex. 컴퓨터)
정보를 주고 받기 위해선 고유한 식별자가 있어야함
전화번호의 원리와 같음!

도메인 이름을 기억하지, IP 이름을 기억하지 않음
그러나 컴퓨터는 도메인 이름을 모름
도메인 이름을 IP 이름으로 번역해주는 존재 필요

cmd에서 
ping 도메인 
입력시 IP 주소 알 수 있음 
해당 주소는 바뀔 수 있음

인터넷! 쉽게 보이지만 내부에 복잡한 알고리즘이 많이 존재 

즉, 웹페이지에 접근하는 방법은 2가지 
1. 도메인 주소에 접근
2. IP 주소에 접근

나의 IP를 확인하는 방법
-> what is my IP
접근을 위해선 
상대방의 주소와 나의 주소가 동시에 있어야함
나의 주소를 갖고 있기 때문에 알려줄 수 있음 

서버는 공인IP!
클라이언트는 상관 없음

서버에 접속한다
IP를 입력한다
편지봉투에 비유 가능
보내는 사람에 서버의 IP를 적고
받는 사람에 클라이언트의 IP를 적음
보고 싶습니다!!
이와 같은 요청도 규약이 있음
HTTP!

다시 돌려주는 과정에선
보내는 사람과 받는 사람의 위치가 바뀜!
교수님!! 근데 클라이언트가 사설IP면 어쩌죠??
해결 방법이 있음

IP 주소 기억하기 너무 어려워~
전화번호 다 기억해서 할 수 있냐??
노! 연락처의 이름을 통해 기억함
도메인의 정의도 이와 같음
도메인은 IP주소와 대응
도메인 네임, IP주소에 비해 기억하기가 용이
실제로 서버의 접속하는 것은 
도메인이라는 식별자가 아닌 IP
Ex. 전화번호 원리

이를 가능하게 하는 기능이 DNS

클라이언트, IP가 뭐야?
Name Server에게 물어봄

Name Server
도메인별로 IP가 어떻게 이루어져 있는지 알고 있음

도메인을 사용하는 방법!
도메인을 구매하여 네임서버에 등록해야 한다.
무료로도 가능하지만! 스스로 이름 설정이 불가능
특수한 도메인 이름, 선점되어 있는 도메인 이름 비싸다!

서버를 돌려돌려돌림판
공인 IP 100개!!!

IP 부족해!!
인터넷을 사용할 수 없는 기계들이 생겨남
전화기는 있는데 줄 전화번호가 없어!
초기 개발자, 인터넷을 처음 설계할 때는 충분할거라 생각

이를 해결하기 위해

- IPv6
새로운 주소 근본적인 해결 방법!
IP 6번째 버전!
Ipv6가 만들 수 있는 주소
2의 128승, 엄청난 숫자
기존 체계에 기반한 것들이 있기에
두 개다 사용하고 있는 과도기


-  사설 IP

공유기?

각각의 컴퓨터에 통신사 회선 연결
통신사와 직접 연결!
그러나, 이는 많은 비용이 발생

이를 절감시키기 위해
하나의 통신사 회선에 공유기를 연결
공유기와 각각의 컴퓨터를 연결
하나의 회선을 통해 3대의 컴퓨터 사용 가능!
회선은 정액제
통신료 부담을 줄일 수 있음
총량제, 만큼 돈을 내게 하자
공유기가 불법인 시기도 있었다

공유기와 기기는
안테나를 통해 무선으로 통신
이와 같은 무선 통신 기법, WIFE

공유기도 IP를 가짐
이전 사이트에 나온 IP, 사실 공유기의 IP!

대표번호, 내선번호 원리와 비슷

즉, 공유기는 공인 IP
기기의 IP는 사설 IP

공유기 내에서만 유일하면 접속가능
즉, 공인IP를 통해 여러개의 IP 생성 가능!

그러나 공유기가 공인IP지만, 고정IP는 아닌 경우가 있음

해결 방법은 포트포워딩!

포트, 항구
배가 정박하는 공간
클라이언트가 특정한 서버에 접속했을 때 정박이 가능하도록!

웹브라우저를 통해 접속한다
기본적으로 http 통신 규약을 이용한다!
따라서 이를 생략할 수 있음
브라우저의 종류에 따라 다를 수 있음

http어쩌고:80
http 프로토콜로 접속해서 80번 포트를 이용하겠다!
나머지 영상 숙제

//

5-3

센서
고장 문제 최다 발생
탈 수 있다!!

+= print과 println 의 차이

오른쪽 상단 
serior plotter
이를 통해 결과 확인








